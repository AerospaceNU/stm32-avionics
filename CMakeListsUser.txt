if (CMAKE_BUILD_TYPE MATCHES "desktop")
    # Undo some platformio stuff
    message("\nUndoing platformio bs\n")

    # unset(CMAKE_SYSTEM_NAME)
    # unset(CMAKE_C_COMPILER_WORKS)
    # unset(CMAKE_CXX_COMPILER_WORKS)
    
    message("hi 3: ${CMAKE_SYSTEM_INCLUDE_PATH} unix ${UNIX} name ${CMAKE_SYSTEM_NAME}")

    # Set versions ourselves
    SET(CMAKE_C_STANDARD 11)
    set(CMAKE_CXX_STANDARD 20)
    set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

    # Include desktop projects
    add_subdirectory(common)
    add_subdirectory(desktop_projects)
    add_subdirectory(desktop_ui)

    set(SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/platformio_dummy.c)
endif ()
